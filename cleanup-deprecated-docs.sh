#!/bin/bash

# ============================================================================
# Cleanup Deprecated Documentation Script
# Hydraulic Diagnostic SaaS Project
# ============================================================================
# 
# –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª—è–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Å —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º
# 
# –î–∞—Ç–∞: 20 –Ω–æ—è–±—Ä—è 2025
# –í–µ—Ä—Å–∏—è: 1.0.0
#
# –í–ê–ñ–ù–û: –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞!
#
# ============================================================================

set -e  # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–µ

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# ============================================================================
# –§—É–Ω–∫—Ü–∏–∏
# ============================================================================

print_header() {
    echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
    echo -e "${BLUE}  $1${NC}"
    echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
}

print_success() {
    echo -e "${GREEN}‚úì $1${NC}"
}

print_warning() {
    echo -e "${YELLOW}‚ö† $1${NC}"
}

print_error() {
    echo -e "${RED}‚úó $1${NC}"
}

print_info() {
    echo -e "${BLUE}‚Ñπ $1${NC}"
}

# ============================================================================
# –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
# ============================================================================

print_header "–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –º—ã –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
if [ ! -f "README.md" ]; then
    print_error "README.md –Ω–µ –Ω–∞–π–¥–µ–Ω. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞!"
    exit 1
fi

print_success "–ù–∞—Ö–æ–¥–∏–º—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Git
if ! git rev-parse --git-dir > /dev/null 2>&1; then
    print_error "–≠—Ç–æ –Ω–µ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π!"
    exit 1
fi

print_success "Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –æ–±–Ω–∞—Ä—É–∂–µ–Ω"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ uncommitted changes
if ! git diff-index --quiet HEAD --; then
    print_warning "–£ –≤–∞—Å –µ—Å—Ç—å –Ω–µcommitted –∏–∑–º–µ–Ω–µ–Ω–∏—è!"
    read -p "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å? (y/n): " -n 1 -r
    echo
    if [[ ! $REPLY =~ ^[Yy]$ ]]; then
        print_info "–û—Ç–º–µ–Ω–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º"
        exit 0
    fi
fi

# ============================================================================
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
# ============================================================================

print_header "–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏"

BACKUP_DIR="docs_backup_$(date +%Y%m%d_%H%M%S)"
mkdir -p "$BACKUP_DIR"

print_info "–ü–∞–ø–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏: $BACKUP_DIR"

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
backup_file() {
    local file=$1
    if [ -f "$file" ]; then
        local dir=$(dirname "$file")
        mkdir -p "$BACKUP_DIR/$dir"
        cp "$file" "$BACKUP_DIR/$file"
        print_success "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω: $file"
        return 0
    else
        print_warning "–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: $file"
        return 1
    fi
}

# ============================================================================
# –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
# ============================================================================

print_header "–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Ñ–∞–π–ª–æ–≤"

# –ú–∞—Å—Å–∏–≤ —Ñ–∞–π–ª–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
declare -a FILES_TO_DELETE=(
    # Billing - Stripe –≤–µ—Ä—Å–∏—è (—É—Å—Ç–∞—Ä–µ–ª–∞)
    "docs/billing-guide.md"
    "services/backend/docs/billing-guide.md"
    
    # –°—Ç–∞—Ä—ã–µ API –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
    "docs/API_ENDPOINTS_OLD.md"
    "docs/api-specification-v1.md"
    
    # –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
    "docs/ARCHITECTURE_OLD.md"
    "docs/system-design-deprecated.md"
    
    # –°—Ç–∞—Ä—ã–µ deployment guides
    "docs/deployment-stripe.md"
    "docs/docker-compose-old.yml"
    
    # Frontend - —Å—Ç–∞—Ä–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    "services/frontend/docs/OLD_README.md"
    "services/frontend/docs/stripe-integration.md"
    
    # Backend - —Å—Ç–∞—Ä–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    "services/backend/docs/stripe-webhooks.md"
    "services/backend/docs/OLD_MODELS.md"
    
    # Testing - —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ specs
    "tests/OLD_TEST_PLAN.md"
    "docs/testing-stripe.md"
    
    # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
    "docs/*.tmp"
    "docs/*.bak"
    "docs/*~"
    
    # –ß–µ—Ä–Ω–æ–≤–∏–∫–∏
    "docs/DRAFT_*.md"
    "docs/WIP_*.md"
)

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –ø–æ–∏—Å–∫–∞
declare -a SEARCH_PATTERNS=(
    "stripe"
    "DEPRECATED"
    "OLD"
    "BACKUP"
)

print_info "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏–∑ —Å–ø–∏—Å–∫–∞..."

FOUND_FILES=()
for file in "${FILES_TO_DELETE[@]}"; do
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ wildcard –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
    if [[ "$file" == *"*"* ]]; then
        for matched_file in $file; do
            if [ -f "$matched_file" ]; then
                FOUND_FILES+=("$matched_file")
                print_success "–ù–∞–π–¥–µ–Ω: $matched_file"
            fi
        done
    else
        if [ -f "$file" ]; then
            FOUND_FILES+=("$file")
            print_success "–ù–∞–π–¥–µ–Ω: $file"
        fi
    fi
done

# –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ —Å Stripe —É–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏
print_info "–ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º Stripe –≤ docs/..."
if [ -d "docs" ]; then
    while IFS= read -r -d '' file; do
        if grep -q -i "stripe" "$file" 2>/dev/null; then
            # –ò—Å–∫–ª—é—á–∏—Ç—å –Ω–∞—à–∏ –Ω–æ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
            if [[ ! "$file" =~ (CRITICAL_UPDATES|KNOWN_ISSUES|deprecated-docs|billing-guide-yookassa).md ]]; then
                FOUND_FILES+=("$file")
                print_warning "–ù–∞–π–¥–µ–Ω —Ñ–∞–π–ª —Å–æ Stripe: $file"
            fi
        fi
    done < <(find docs -type f -name "*.md" -print0)
fi

# –ü–æ–¥—Å—á—ë—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
TOTAL_FILES=${#FOUND_FILES[@]}

if [ $TOTAL_FILES -eq 0 ]; then
    print_success "–£—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!"
    print_info "–ü—Ä–æ–µ–∫—Ç —É–∂–µ –æ—á–∏—â–µ–Ω"
    exit 0
fi

print_info "–ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è: $TOTAL_FILES"

# ============================================================================
# –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è
# ============================================================================

print_header "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ"

echo -e "${YELLOW}–ë—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:${NC}"
for file in "${FOUND_FILES[@]}"; do
    echo "  - $file"
done

echo ""
read -p "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ? (y/n): " -n 1 -r
echo
if [[ ! $REPLY =~ ^[Yy]$ ]]; then
    print_info "–û—Ç–º–µ–Ω–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º"
    exit 0
fi

# ============================================================================
# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
# ============================================================================

print_header "–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ"

for file in "${FOUND_FILES[@]}"; do
    backup_file "$file"
done

print_success "–í—Å–µ —Ñ–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ $BACKUP_DIR"

# ============================================================================
# –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
# ============================================================================

print_header "–£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤"

DELETED_COUNT=0
FAILED_COUNT=0

for file in "${FOUND_FILES[@]}"; do
    if [ -f "$file" ]; then
        if rm "$file"; then
            print_success "–£–¥–∞–ª—ë–Ω: $file"
            ((DELETED_COUNT++))
        else
            print_error "–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å: $file"
            ((FAILED_COUNT++))
        fi
    fi
done

# ============================================================================
# –û—á–∏—Å—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –ø–∞–ø–æ–∫
# ============================================================================

print_header "–û—á–∏—Å—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –ø–∞–ø–æ–∫"

# –£–¥–∞–ª–µ–Ω–∏–µ –ø—É—Å—Ç—ã—Ö –ø–∞–ø–æ–∫ –≤ docs/
if [ -d "docs" ]; then
    find docs -type d -empty -delete 2>/dev/null || true
    print_success "–ü—É—Å—Ç—ã–µ –ø–∞–ø–∫–∏ —É–¥–∞–ª–µ–Ω—ã"
fi

# ============================================================================
# Git –æ–ø–µ—Ä–∞—Ü–∏–∏
# ============================================================================

print_header "Git –æ–ø–µ—Ä–∞—Ü–∏–∏"

# –î–æ–±–∞–≤–∏—Ç—å —É–¥–∞–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ git
git add -A

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
if git diff --cached --quiet; then
    print_info "–ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫–æ–º–º–∏—Ç–∞"
else
    print_success "–ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ staging area"
    
    # –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å
    print_info "Git —Å—Ç–∞—Ç—É—Å:"
    git status --short
    
    echo ""
    read -p "–°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç? (y/n): " -n 1 -r
    echo
    if [[ $REPLY =~ ^[Yy]$ ]]; then
        git commit -m "docs: remove deprecated documentation

- Removed $DELETED_COUNT deprecated documentation files
- Backup created in $BACKUP_DIR
- Cleaned up Stripe references
- Removed old API specs and architecture docs

Refs: deprecated-docs.md, CRITICAL_UPDATES.md"
        
        print_success "–ö–æ–º–º–∏—Ç —Å–æ–∑–¥–∞–Ω"
    else
        print_info "–ö–æ–º–º–∏—Ç –ø—Ä–æ–ø—É—â–µ–Ω (–∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ staging area)"
    fi
fi

# ============================================================================
# –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç
# ============================================================================

print_header "–û—Ç—á—ë—Ç"

echo ""
echo -e "${GREEN}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
echo -e "${GREEN}  –û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!${NC}"
echo -e "${GREEN}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
echo ""
echo -e "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:"
echo -e "   ‚Ä¢ –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: ${BLUE}$TOTAL_FILES${NC}"
echo -e "   ‚Ä¢ –£–¥–∞–ª–µ–Ω–æ: ${GREEN}$DELETED_COUNT${NC}"
echo -e "   ‚Ä¢ –û—à–∏–±–æ–∫: ${RED}$FAILED_COUNT${NC}"
echo ""
echo -e "üíæ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è: ${BLUE}$BACKUP_DIR${NC}"
echo ""
echo -e "üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
echo -e "   1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç"
echo -e "   2. –ï—Å–ª–∏ –≤—Å—ë OK - git push"
echo -e "   3. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ $BACKUP_DIR"
echo ""
echo -e "‚ö†Ô∏è  –†–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:"
echo -e "   ${YELLOW}rm -rf $BACKUP_DIR${NC}"
echo ""

# ============================================================================
# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ deprecated –ø–∞–ø–∫–∏
# ============================================================================

if [ ! -d "docs/deprecated" ]; then
    echo ""
    read -p "–°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É docs/deprecated –¥–ª—è –∞—Ä—Ö–∏–≤–∞? (y/n): " -n 1 -r
    echo
    if [[ $REPLY =~ ^[Yy]$ ]]; then
        mkdir -p docs/deprecated
        
        # –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–∞–∂–Ω—ã–µ deprecated —Ñ–∞–π–ª—ã –≤ –∞—Ä—Ö–∏–≤
        if [ -f "$BACKUP_DIR/docs/billing-guide.md" ]; then
            cp "$BACKUP_DIR/docs/billing-guide.md" docs/deprecated/
            print_success "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω billing-guide.md –≤ docs/deprecated/"
        fi
        
        # –°–æ–∑–¥–∞—Ç—å README –≤ deprecated
        cat > docs/deprecated/README.md << 'EOF'
# Deprecated Documentation Archive

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —É—Å—Ç–∞—Ä–µ–≤—à—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–π —Å–ø—Ä–∞–≤–∫–∏.

**‚ö†Ô∏è –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï —ç—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!**

## –ê—Ä—Ö–∏–≤–Ω—ã–µ —Ñ–∞–π–ª—ã

- `billing-guide.md` - –°—Ç–∞—Ä–∞—è Stripe –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `billing-guide-yookassa.md`)

## –î–∞—Ç–∞ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏

20 –Ω–æ—è–±—Ä—è 2025

## –°–º. —Ç–∞–∫–∂–µ

- `../CRITICAL_UPDATES.md` - –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `../deprecated-docs.md` - –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
EOF
        
        git add docs/deprecated/
        print_success "–ü–∞–ø–∫–∞ docs/deprecated —Å–æ–∑–¥–∞–Ω–∞"
    fi
fi

print_success "–ì–æ—Ç–æ–≤–æ! ‚ú®"

exit 0