# ============================================
# Development Override
# Использование: docker-compose -f docker-compose.yml -f docker-compose.dev.yml up
# ============================================

services:
  backend_fastapi:
    build:
      target: development
    environment:
      DEBUG: "true"
      ENV: development
      LOG_LEVEL: DEBUG
    volumes:
      - ./services/backend_fastapi:/app
    command: uvicorn main:app --reload --host 0.0.0.0 --port 8000

  backend_django:
    environment:
      DEBUG: "true"
    volumes:
      - ./services/backend:/app
    command: python manage.py runserver 0.0.0.0:8000

  gnn_service:
    environment:
      DEBUG: "true"
      LOG_LEVEL: DEBUG
    volumes:
      - ./services/gnn_service:/app
    command: uvicorn inference_service:app --reload --host 0.0.0.0 --port 8001

  rag_service:
    environment:
      DEBUG: "true"
    volumes:
      - ./services/rag_service:/app
    command: uvicorn main:app --reload --host 0.0.0.0 --port 8002

  postgres:
    ports:
      - "5432:5432"
    environment:
      POSTGRES_DB: hydraulic_dev

  redis:
    ports:
      - "6379:6379"
