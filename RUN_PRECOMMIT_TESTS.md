# üß™ –ó–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ pre-commit —Ö—É–∫–æ–≤

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –ª–æ–∫–∞–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å pre-commit —Ö—É–∫–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ Hydraulic Diagnostic SaaS –∏ –±—ã—Å—Ç—Ä–æ —É—Å—Ç—Ä–∞–Ω—è—Ç—å —Ç–∏–ø–æ–≤—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è.

---

## üì¶ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.10+
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: `pip install -r backend/requirements-dev.txt`
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π pre-commit: `pip install pre-commit`

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–µ—Ä—É—Ç—Å—è –∏–∑ `.pre-commit-config.yaml` –∏ `pyproject.toml` (Black, isort, flake8, mypy, bandit, —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∞–π–ª–æ–≤).

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ö—É–∫–æ–≤ –≤ git
pre-commit install

# –ü–æ–ª–Ω—ã–π –ø—Ä–æ–≥–æ–Ω –≤—Å–µ—Ö —Ö—É–∫–æ–≤ –ø–æ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º
pre-commit run --all-files

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ Makefile (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
make check || true
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ Passed. –ï—Å–ª–∏ –µ—Å—Ç—å –∑–∞–º–µ—á–∞–Ω–∏—è ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ ¬´–ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ¬ª.  

---

## üîç –¢–æ—á–µ—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
# –ò–º–ø–æ—Ä—Ç—ã (isort)
python -m isort --check-only --diff backend/

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (black)
python -m black --check --diff backend/

# –õ–∏–Ω—Ç–µ—Ä (flake8)
python -m flake8 backend/

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (bandit)
python -m bandit -c .bandit -r backend/

# –¢–∏–ø—ã (mypy)
python -m mypy --ignore-missing-imports --check-untyped-defs backend/
```

---

## üß∞ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤—ã—Ö –∑–∞–º–µ—á–∞–Ω–∏–π

### –ò–º–ø–æ—Ä—Ç—ã –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
isort backend/
black backend/
```

### Flake8: —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—â–∏–µ—Å—è –ø—Ä–∞–≤–∏–ª–∞
- E226 ‚Äî –ø—Ä–æ–±–µ–ª—ã –≤–æ–∫—Ä—É–≥ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤: `a + b * c`
- E402 ‚Äî –∏–º–ø–æ—Ä—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–≤–µ—Ä—Ö—É —Ñ–∞–π–ª–∞. –î–æ–ø—É—Å—Ç–∏–º–æ –¥–æ–±–∞–≤–ª—è—Ç—å `# noqa: E402` –¥–ª—è –∏–º–ø–æ—Ä—Ç–æ–≤ –ø–æ—Å–ª–µ `django.setup()` –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö.
- E704 ‚Äî –Ω–µ —Ä–∞–∑–º–µ—â–∞—Ç—å `def` –∏ —Ç–µ–ª–æ –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
- F841 ‚Äî —É–¥–∞–ª–∏—Ç—å/–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- C901 ‚Äî —á—Ä–µ–∑–º–µ—Ä–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å: —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–º–µ—Ç–∏—Ç—å `# noqa: C901` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–∏
- W291/W292/W293 ‚Äî —Ö–≤–æ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–±–µ–ª—ã / –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞ / –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏

### Bandit (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- –ò—Å–∫–ª—é—á–∏—Ç—å f-strings –≤ SQL. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:
```python
# –ü–ª–æ—Ö–æ
cursor.execute(f"SELECT compress_chunk('{full_name}')")

# –•–æ—Ä–æ—à–æ
cursor.execute("SELECT compress_chunk(%s)", [full_name])
```

### Mypy
- –î–æ–±–∞–≤–ª—è—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –≤ –ø—É–±–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —É—á–∞—Å—Ç–∫–∏ `# type: ignore[<code>]`

---

## üß™ –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

```bash
# –ü–æ–ª–Ω—ã–π –ø—Ä–æ–≥–æ–Ω –∏ –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
isort backend/ && black backend/

# –ü—Ä–æ–≥–æ–Ω —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
flake8 backend/ && bandit -c .bandit -r backend/

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–≥–æ–Ω (–±—ã—Å—Ç—Ä—ã–π)
pre-commit run trailing-whitespace -a && \
pre-commit run end-of-file-fixer -a && \
python -m isort . && python -m black . && \
python -m flake8 backend/
```

---

## üß≠ –û—Ç—á—ë—Ç–Ω–æ—Å—Ç—å –∏ CI
- –í—Å–µ —Ö—É–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ GitHub Actions –≤ workflow `main.yml/ci.yml` –≤ —á–∞—Å—Ç–∏ –ª–∏–Ω—Ç–∏–Ω–≥–∞ –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫.
- –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –ª—é–±–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ CI –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –ª–æ–≥–æ–≤ Actions.

---

## ‚ùì FAQ
- –í —Å–∫—Ä–∏–ø—Ç–∞—Ö, –≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è `django.setup()`, –∏–º–ø–æ—Ä—Ç—ã Django-–∑–∞–≤–∏—Å–∏–º—ã—Ö –º–æ–¥—É–ª–µ–π –¥–æ–ø—É—Å—Ç–∏–º—ã –ø–æ—Å–ª–µ setup —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º `# noqa: E402`.
- –î–ª—è —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–æ–±–∞–≤–ª—è–π—Ç–µ `# noqa: C901` —Ç–æ–ª—å–∫–æ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏ —Å –∑–∞–¥–∞—á–µ–π –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥.
- –î–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞ —Å—Ç—Ä–æ–∫—É –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `# noqa: <CODE>` –∏ –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –ø–æ—è—Å–Ω–µ–Ω–∏–µ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.

---

–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-10-21
