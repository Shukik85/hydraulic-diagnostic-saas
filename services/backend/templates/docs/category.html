{% extends "docs/base.html" %}
{% load static %}

{% block title %}{{ category.name }} - Documentation - {{ block.super }}{% endblock %}

{% block docs_content %}
<div class="docs-breadcrumb">
    <a href="{% url 'docs:index' %}" class="docs-breadcrumb__link">Documentation</a>
    <span class="docs-breadcrumb__separator">/</span>
    <span class="docs-breadcrumb__current">{{ category.name }}</span>
</div>

<div class="docs-header">
    <div class="docs-header__icon">{{ category.icon|default:"üìÑ" }}</div>
    <div>
        <h1 class="docs-header__title">{{ category.name }}</h1>
        {% if category.description %}
        <p class="docs-header__subtitle">{{ category.description }}</p>
        {% endif %}
    </div>
</div>

<section class="docs-section">
    {% if documents %}
    <div class="doc-list">
        {% for doc in documents %}
        <a href="{% url 'docs:detail' doc.slug %}" class="doc-list-item">
            <div class="doc-list-item__main">
                <h3 class="doc-list-item__title">
                    {% if doc.id in user_progress %}
                    <span class="doc-list-item__check">‚úì</span>
                    {% endif %}
                    {{ doc.title }}
                </h3>
                {% if doc.summary %}
                <p class="doc-list-item__summary">{{ doc.summary }}</p>
                {% endif %}
                {% if doc.tags %}
                <div class="doc-list-item__tags">
                    {% for tag in doc.tag_list %}
                    <span class="tag">{{ tag }}</span>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            <div class="doc-list-item__meta">
                <div class="doc-list-item__stats">
                    <span>üëÅ {{ doc.view_count }}</span>
                    <span>üìÖ {{ doc.updated_at|date:"M d" }}</span>
                </div>
                {% if doc.author %}
                <div class="doc-list-item__author">
                    By {{ doc.author.get_full_name|default:doc.author.email }}
                </div>
                {% endif %}
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="docs-empty">
        <div class="docs-empty__icon">üìÑ</div>
        <h3 class="docs-empty__title">No documents yet</h3>
        <p class="docs-empty__message">This category doesn't have any published documents.</p>
        <a href="{% url 'docs:index' %}" class="btn btn--secondary">Back to Documentation</a>
    </div>
    {% endif %}
</section>
{% endblock %}
