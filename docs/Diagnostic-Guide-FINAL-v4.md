# üìö Diagnostic System Guide v4.0 FINAL
## –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

## üìù –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
2. [–ú–µ—Ç–æ–¥—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏](#–º–µ—Ç–æ–¥—ã-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
3. [–ü—Ä–æ—Ü–µ—Å—Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏](#–ø—Ä–æ—Ü–µ—Å—Å-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
4. [Django Models](#django-models)
5. [API & Frontend](#api--frontend)
6. [Roadmap](#roadmap)

---

## üè† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —á–µ—Ç—ã—Ä–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

**üé® Frontend (Nuxt 4)**
- Dashboard - –≥–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å –æ–±–∑–æ—Ä–æ–º —Å–∏—Å—Ç–µ–º
- Diagnostics UI - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- Real-time Charts - –≥—Ä–∞—Ñ–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**‚öôÔ∏è Backend (Django 5.2)**
- REST API - –æ—Å–Ω–æ–≤–Ω–æ–µ API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- WebSocket - –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- RAG AI - —Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

**üíæ Database (TimescaleDB)**
- Sensor Data - –¥–∞–Ω–Ω—ã–µ —Å –¥–∞—Ç—á–∏–∫–æ–≤
- Analysis Results - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
- System Config - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º

**ü§ñ AI/ML (Ollama + Qwen3)**
- LLM Engine - —è–∑—ã–∫–æ–≤–∞—è –º–æ–¥–µ–ª—å
- FAISS Index - –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
- RAG Pipeline - –∫–æ–Ω–≤–µ–π–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

1. **–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö**: –î–∞—Ç—á–∏–∫–∏ ‚Üí TimescaleDB
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞**: TimescaleDB ‚Üí Django AI Engine
3. **–ê–Ω–∞–ª–∏–∑**: AI Engine ‚Üí 3 –º–µ—Ç–æ–¥–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: Django ‚Üí WebSocket ‚Üí Nuxt 4 Frontend
5. **–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏**: RAG System ‚Üí Frontend Chat

---

## üîß –ú–µ—Ç–æ–¥—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—Ä–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –º–µ—Ç–æ–¥–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É.

### –ú–µ—Ç–æ–¥ 1Ô∏è‚É£: –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (–≤–µ—Å: 40%)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤ —Å —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–º–∏ –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –º–æ–¥–µ–ª—è–º –≥–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º.

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã:**

1. **–ú–æ–º–µ–Ω—Ç –Ω–∞—Å–æ—Å–∞:**
   \(M_–Ω = \frac{V_0 \times P}{2\pi \times \eta}\)
   
2. **–£–≥–ª–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å:**
   \(\omega = \frac{M_–¥ + M_–º \times n - M_–Ω}{I_–¥ + I_–Ω + I_{\text{–º–µ—Ö}}}\)
   
3. **–†–∞—Å—Ö–æ–¥:**
   \(Q = \omega \times V_0 \times \eta\)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏:**
- Œî < 5% ‚Üí ‚úÖ **–ù–æ—Ä–º–∞** (score = 0.1)
- 5% ‚â§ Œî < 10% ‚Üí ‚ö†Ô∏è **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ** (score = 0.5)
- Œî ‚â• 10% ‚Üí üî¥ **–ù–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å** (score = 0.9)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–∫–Ω–æ –¥–∞–Ω–Ω—ã—Ö 20-30 —Å–µ–∫—É–Ω–¥
- –í—ã—á–∏—Å–ª—è–µ–º —Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- –£—á–∏—Ç—ã–≤–∞–µ–º –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–∏ –¥–∞—Ç—á–∏–∫–æ–≤

### –ú–µ—Ç–æ–¥ 2Ô∏è‚É£: –§–∞–∑–æ–≤—ã–µ –ø–æ—Ä—Ç—Ä–µ—Ç—ã (–≤–µ—Å: 40%)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è –≤ —Ñ–∞–∑–æ–≤–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ, —Å—Ç—Ä–æ—è –≥—Ä–∞—Ñ–∏–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ—Ç –ø–æ–ª–æ–∂–µ–Ω–∏—è, —Å–∏–ª—ã –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –¥–∞–≤–ª–µ–Ω–∏—è –æ—Ç —Ä–∞—Å—Ö–æ–¥–∞.

**–û—Å–Ω–æ–≤–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ (–ø–ª–æ—â–∞–¥—å –ø–æ –ì–∞—É—Å—Å—É):**
\(S = 0.5 \times \left| \sum_{i=1}^{n-1} x_i y_{i+1} + x_n y_1 - \sum_{i=1}^{n-1} x_{i+1} y_i - x_1 y_n \right|\)

**–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø–ª–æ—â–∞–¥–∏:**
\(ŒîS = \frac{|S - S_{—ç—Ç–∞–ª}|}{S_{—ç—Ç–∞–ª}} \times 100\%\)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏:**
| ŒîS | –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏–µ | Score |
|----|--------|---------|---------|
| < 10% | ‚úÖ –ù–æ—Ä–º–∞ | –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å | 0.1 |
| 10-25% | ‚ö†Ô∏è –ü—Ä–µ–¥–æ—Ç–∫–∞–∑ | –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ | 0.5 |
| > 25% | üî¥ –û—Ç–∫–∞–∑ | –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π —Ä–µ–º–æ–Ω—Ç | 0.9 |

**–¢–∏–ø—ã —Ñ–∞–∑–æ–≤—ã—Ö –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤:**
- **V = f(x)**: —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç –ø–æ–ª–æ–∂–µ–Ω–∏—è
- **F = f(V)**: —Å–∏–ª–∞ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏  
- **P = f(Q)**: –¥–∞–≤–ª–µ–Ω–∏–µ –æ—Ç —Ä–∞—Å—Ö–æ–¥–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–µ—á–µ–Ω–∏–µ 20+ —Å–µ–∫—É–Ω–¥ —Å —á–∞—Å—Ç–æ—Ç–æ–π 100 –ì—Ü
- –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ä–º—ã –∫–æ–Ω—Ç—É—Ä–∞ (—Ä–∞–∑—Ä—ã–≤—ã, —Å–º–µ—â–µ–Ω–∏—è, –∏—Å–∫–∞–∂–µ–Ω–∏—è)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–µ–Ω—Ç—Ä–∞ –º–∞—Å—Å –∏ —ç–∫—Å—Ü–µ–Ω—Ç—Ä–∏—Å–∏—Ç–µ—Ç–∞

### –ú–µ—Ç–æ–¥ 3Ô∏è‚É£: –¢—Ä–∏–±–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–≤–µ—Å: 20%)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–± —Ä–∞–±–æ—á–µ–π –∂–∏–¥–∫–æ—Å—Ç–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Å—Ç–µ–ø–µ–Ω–∏ –∏–∑–Ω–æ—Å–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≥–∏–¥—Ä–æ—Å–∏—Å—Ç–µ–º—ã.

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–Ω–∞–ª–∏–∑–∞:**

1. **–°—á–µ—Ç—á–∏–∫ —á–∞—Å—Ç–∏—Ü (ISO 4406)**:
   - ‚â• 4 –º–∫–º/–º–ª
   - ‚â• 6 –º–∫–º/–º–ª  
   - ‚â• 14 –º–∫–º/–º–ª

2. **–°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (—ç–ª–µ–º–µ–Ω—Ç—ã –∏–∑–Ω–æ—Å–∞)**:
   - **Fe** (–∂–µ–ª–µ–∑–æ) ‚Üí –∏–∑–Ω–æ—Å –Ω–∞—Å–æ—Å–∞/–º–æ—Ç–æ—Ä–∞
   - **Cu** (–º–µ–¥—å) ‚Üí –∏–∑–Ω–æ—Å –ø–æ–¥—à–∏–ø–Ω–∏–∫–æ–≤
   - **Al** (–∞–ª—é–º–∏–Ω–∏–π) ‚Üí –∏–∑–Ω–æ—Å —Ü–∏–ª–∏–Ω–¥—Ä–æ–≤/–ø–æ—Ä—à–Ω–µ–π
   - **Cr** (—Ö—Ä–æ–º) ‚Üí –∏–∑–Ω–æ—Å —É–ø–ª–æ—Ç–Ω–µ–Ω–∏–π
   - **Si** (–∫—Ä–µ–º–Ω–∏–π) ‚Üí –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–µ –∏–∑–≤–Ω–µ

3. **–§–∏–∑–∏–∫–æ-—Ö–∏–º–∏—á–µ—Å–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞**:
   - –í—è–∑–∫–æ—Å—Ç—å –ø—Ä–∏ 40¬∞C (—Å–°—Ç)
   - pH —É—Ä–æ–≤–µ–Ω—å
   - –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –≤–æ–¥—ã (ppm)
   - –ö–∏—Å–ª–æ—Ç–Ω–æ–µ —á–∏—Å–ª–æ (–º–≥ KOH/–≥)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ù–æ—Ä–º–∞ | –í–Ω–∏–º–∞–Ω–∏–µ | –ö—Ä–∏—Ç–∏–∫–∞ |
|-----------|------|----------|----------|
| **ISO 4406** | 15/13/10 | 16/14/11 | ‚â• 17/15/12 |
| **Score** | 0.1 | 0.5 | 0.9 |

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:**
- **Fe‚Üë** = –ø–æ–≤—ã—à–µ–Ω–Ω—ã–π –∏–∑–Ω–æ—Å –Ω–∞—Å–æ—Å–∞/–º–æ—Ç–æ—Ä–∞
- **Cu‚Üë** = –∏–∑–Ω–æ—Å –ø–æ–¥—à–∏–ø–Ω–∏–∫–æ–≤ –∏–ª–∏ –±—Ä–æ–Ω–∑–æ–≤—ã—Ö –≤—Ç—É–ª–æ–∫
- **Al‚Üë** = –∏–∑–Ω–æ—Å –∞–ª—é–º–∏–Ω–∏–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (—Ü–∏–ª–∏–Ω–¥—Ä—ã, –ø–æ—Ä—à–Ω–∏)
- **pH < 6** = –æ–∫–∏—Å–ª–µ–Ω–∏–µ –º–∞—Å–ª–∞
- **–í–æ–¥–∞ > 500 ppm** = –ø—Ä–æ–±–ª–µ–º—ã —Å –≥–µ—Ä–º–µ—Ç–∏—á–Ω–æ—Å—Ç—å—é

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–®–∞–≥ 1: –ù–∞—á–∞–ª–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏**
- –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–ª–∏ –≤—Ä—É—á–Ω—É—é)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**–®–∞–≥ 2: –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö**
- –î–∞–Ω–Ω—ã–µ —Å –¥–∞—Ç—á–∏–∫–æ–≤ (–¥–∞–≤–ª–µ–Ω–∏–µ, —Ä–∞—Å—Ö–æ–¥, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, —Å–∫–æ—Ä–æ—Å—Ç—å)
- –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ TimescaleDB
- –ü—Ä–æ–±—ã —Ä–∞–±–æ—á–µ–π –∂–∏–¥–∫–æ—Å—Ç–∏ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏)

**–®–∞–≥ 3: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–µ—Ö –º–µ—Ç–æ–¥–æ–≤**
- **–ú–µ—Ç–æ–¥ 1**: –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å (–≤–µ—Å 40%)
- **–ú–µ—Ç–æ–¥ 2**: –§–∞–∑–æ–≤—ã–µ –ø–æ—Ä—Ç—Ä–µ—Ç—ã (–≤–µ—Å 40%)
- **–ú–µ—Ç–æ–¥ 3**: –¢—Ä–∏–±–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–≤–µ—Å 20%)

**–®–∞–≥ 4: –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ü–µ–Ω–æ–∫**
- –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –≤—Å–µ—Ö –æ—Ü–µ–Ω–æ–∫ –∫ –¥–∏–∞–ø–∞–∑–æ–Ω—É 0.0-1.0
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞—Å—á–µ—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–®–∞–≥ 5: –ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞**
\(D = 0.4 \times M + 0.4 \times P + 0.2 \times T\)

–≥–¥–µ:
- M = –æ—Ü–µ–Ω–∫–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–æ–¥–µ–ª–∏
- P = –æ—Ü–µ–Ω–∫–∞ —Ñ–∞–∑–æ–≤—ã—Ö –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤
- T = –æ—Ü–µ–Ω–∫–∞ —Ç—Ä–∏–±–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–®–∞–≥ 6: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞**
- **D < 0.3** ‚Üí ‚úÖ **–ù–æ—Ä–º–∞** (–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
- **0.3 ‚â§ D < 0.6** ‚Üí ‚ö†Ô∏è **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ** (–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ)
- **D ‚â• 0.6** ‚Üí üî¥ **–ù–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å** (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π —Ä–µ–º–æ–Ω—Ç)

**–®–∞–≥ 7: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞**
- –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
- –î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—é/—Ä–µ–º–æ–Ω—Ç—É
- –ü—Ä–æ–≥–Ω–æ–∑ –æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ (–≤ —á–∞—Å–∞—Ö —Ä–∞–±–æ—Ç—ã)

**–®–∞–≥ 8: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**
- –ó–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ TimescaleDB
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

### –ê–ª–≥–æ—Ä–∏—Ç–º –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–æ–¥–µ–ª–∏

1. **–ü–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏—Å—Ç–µ–º—ã**
2. **–°–æ–±—Ä–∞—Ç—å –∏–∑–º–µ—Ä–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: P‚ÇÅ-P‚ÇÑ, Q‚ÇÅ-Q‚ÇÑ, œâ‚Çô, œâ‚Çò, T
3. **–í—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–∞—Å—á–µ—Ç –ø–æ –º–æ–¥–µ–ª—è–º**:
   - M‚Çô = V √ó P / 2œÄ√óŒ∑
   - œâ‚Çí‚Çò·µ¢‚Çë = ŒîM / I
   - Q‚Çí‚Çò·µ¢‚Çë = œâ √ó V √ó Œ∑
4. **–°—Ä–∞–≤–Ω–∏—Ç—å —Å –∏–∑–º–µ—Ä–µ–Ω–Ω—ã–º–∏**:
   - ŒîP = |P·µ¢‚ÇÇ‚Çò - P·µ£‚Çê‚Çõ·µ©| / P·µ£‚Çê‚Çõ·µ©
   - ŒîQ = |Q·µ¢‚ÇÇ‚Çò - Q·µ£‚Çê‚Çõ·µ©| / Q·µ£‚Çê‚Çõ·µ©
5. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ–±—â–µ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ**: Œî_–æ–±—â = MAX(ŒîP, ŒîQ)
6. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å score –Ω–∞ –æ—Å–Ω–æ–≤–µ –î%**

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ñ–∞–∑–æ–≤—ã—Ö –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤

1. **–°–æ–±—Ä–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã** (20+ —Å–µ–∫, 100 –ì—Ü): x(t), V(t), F(t), P(t)
2. **–ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∞–∑–æ–≤—ã–µ –ø–æ—Ä—Ç—Ä–µ—Ç—ã**: V=f(x), F=f(V), P=f(Q)
3. **–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–ª–æ—â–∞–¥—å** –ø–æ —Ñ–æ—Ä–º—É–ª–µ –ì–∞—É—Å—Å–∞
4. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ**: ŒîS = |S - S—ç—Ç–∞–ª| / S—ç—Ç–∞–ª
5. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—É** –∫–æ–Ω—Ç—É—Ä–∞:
   - –°–º–µ—â–µ–Ω–∏–µ —Ü–µ–Ω—Ç—Ä–∞?
   - –†–∞–∑—Ä—ã–≤—ã –∫–æ–Ω—Ç—É—Ä–∞?
   - –ò—Å–∫–∞–∂–µ–Ω–∏—è —Ñ–æ—Ä–º—ã?
6. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å score** –∏ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ç—Ä–∏–±–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

1. **–û—Ç–æ–±—Ä–∞—Ç—å –ø—Ä–æ–±—É** (100 –º–ª —Ä–∞–±–æ—á–µ–π –∂–∏–¥–∫–æ—Å—Ç–∏)
2. **–í—ã–ø–æ–ª–Ω–∏—Ç—å –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑**:
   - –°—á–µ—Ç—á–∏–∫ —á–∞—Å—Ç–∏—Ü (‚â• 4, 6, 14 –º–∫–º)
   - –°–ø–µ–∫—Ç—Ä–æ–º–µ—Ç—Ä (Fe, Cu, Al, Cr, Si)
   - –í–∏—Å–∫–æ–∑–∏–º–µ—Ç—Ä (—Å–°—Ç, pH, –≤–æ–¥–∞ ppm)
3. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å ISO 4406 –∫–ª–∞—Å—Å** —á–∏—Å—Ç–æ—Ç—ã
4. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–∑–Ω–æ—Å–∞** –ø–æ —ç–ª–µ–º–µ–Ω—Ç–Ω–æ–º—É —Å–æ—Å—Ç–∞–≤—É
5. **–û—Ü–µ–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∂–∏–¥–∫–æ—Å—Ç–∏** –ø–æ —Ñ–∏–∑–∏–∫–æ-—Ö–∏–º–∏—á–µ—Å–∫–∏–º —Å–≤–æ–π—Å—Ç–≤–∞–º
6. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å score** –∏ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

---

## üíª Django Models

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏

```python
# backend/apps/diagnostics/models/core.py
from django.db import models
from django.contrib.auth.models import User
from timescale.db.models.models import TimescaleModel
from timescale.db.models.fields import TimescaleDateTimeField
import uuid

class HydraulicSystem(models.Model):
    """–ì–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞"""
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    name = models.CharField(max_length=200, verbose_name="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã")
    system_type = models.CharField(
        max_length=50,
        choices=[
            ('test_rig', '–ò—Å–ø—ã—Ç–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç–µ–Ω–¥'),
            ('production', '–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –ª–∏–Ω–∏—è'),
            ('mobile', '–ú–æ–±–∏–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞'),
            ('stationary', '–°—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞'),
        ],
        default='production'
    )
    max_pressure = models.FloatField(verbose_name="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ, –ú–ü–∞")
    nominal_flow = models.FloatField(verbose_name="–ù–æ–º–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—Ö–æ–¥, –ª/–º–∏–Ω")
    fluid_type = models.CharField(max_length=100, verbose_name="–¢–∏–ø —Ä–∞–±–æ—á–µ–π –∂–∏–¥–∫–æ—Å—Ç–∏")
    owner = models.ForeignKey(User, on_delete=models.CASCADE, verbose_name="–í–ª–∞–¥–µ–ª–µ—Ü")
    created_at = models.DateTimeField(auto_now_add=True)
    is_active = models.BooleanField(default=True, verbose_name="–ê–∫—Ç–∏–≤–Ω–∞")
    
    class Meta:
        db_table = 'hydraulic_systems'
        verbose_name = "–ì–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞"
        verbose_name_plural = "–ì–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã"
        ordering = ['-created_at']

class Equipment(models.Model):
    """–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ"""
    EQUIPMENT_TYPES = [
        ('pump', '–ì–∏–¥—Ä–æ–Ω–∞—Å–æ—Å'),
        ('motor', '–ì–∏–¥—Ä–æ–º–æ—Ç–æ—Ä'),
        ('cylinder', '–ì–∏–¥—Ä–æ—Ü–∏–ª–∏–Ω–¥—Ä'),
        ('valve_relief', '–ü—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–ª–∞–ø–∞–Ω'),
        ('valve_check', '–û–±—Ä–∞—Ç–Ω—ã–π –∫–ª–∞–ø–∞–Ω'),
        ('accumulator', '–ì–∏–¥—Ä–æ–∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä'),
        ('filter', '–§–∏–ª—å—Ç—Ä'),
        ('tank', '–ì–∏–¥—Ä–æ–±–∞–∫'),
    ]
    
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    system = models.ForeignKey(HydraulicSystem, on_delete=models.CASCADE, related_name='equipment')
    name = models.CharField(max_length=200, verbose_name="–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è")
    equipment_type = models.CharField(max_length=50, choices=EQUIPMENT_TYPES)
    technical_parameters = models.JSONField(default=dict, verbose_name="–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã")
    installation_date = models.DateTimeField(verbose_name="–î–∞—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏")
    is_active = models.BooleanField(default=True, verbose_name="–ê–∫—Ç–∏–≤–Ω–æ")
    
    class Meta:
        db_table = 'equipment'
        unique_together = ['system', 'name']

class Sensor(models.Model):
    """–î–∞—Ç—á–∏–∫"""
    SENSOR_TYPES = [
        ('pressure', '–î–∞—Ç—á–∏–∫ –¥–∞–≤–ª–µ–Ω–∏—è'),
        ('flow', '–î–∞—Ç—á–∏–∫ —Ä–∞—Å—Ö–æ–¥–∞'),
        ('temperature', '–î–∞—Ç—á–∏–∫ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã'),
        ('speed', '–î–∞—Ç—á–∏–∫ —Å–∫–æ—Ä–æ—Å—Ç–∏'),
        ('position', '–î–∞—Ç—á–∏–∫ –ø–æ–ª–æ–∂–µ–Ω–∏—è'),
        ('vibration', '–î–∞—Ç—á–∏–∫ –≤–∏–±—Ä–∞—Ü–∏–∏'),
    ]
    
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    equipment = models.ForeignKey(Equipment, on_delete=models.CASCADE, related_name='sensors')
    name = models.CharField(max_length=200, verbose_name="–ù–∞–∑–≤–∞–Ω–∏–µ –¥–∞—Ç—á–∏–∫–∞")
    sensor_type = models.CharField(max_length=50, choices=SENSOR_TYPES)
    sensor_id_external = models.CharField(max_length=100, verbose_name="–í–Ω–µ—à–Ω–∏–π ID")
    unit = models.CharField(max_length=20, verbose_name="–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è")
    min_value = models.FloatField(verbose_name="–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ")
    max_value = models.FloatField(verbose_name="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ")
    accuracy = models.FloatField(verbose_name="–¢–æ—á–Ω–æ—Å—Ç—å, %")
    is_active = models.BooleanField(default=True, verbose_name="–ê–∫—Ç–∏–≤–µ–Ω")
    
    class Meta:
        db_table = 'sensors'
        unique_together = ['equipment', 'sensor_id_external']
```

### –ú–æ–¥–µ–ª–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

```python
# backend/apps/diagnostics/models/results.py
class MathematicalModelResult(TimescaleModel):
    """–†–µ–∑—É–ª—å—Ç–∞—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–æ–¥–µ–ª–∏"""
    time = TimescaleDateTimeField(interval="1 day")
    system = models.ForeignKey(HydraulicSystem, on_delete=models.CASCADE)
    
    # –ò–∑–º–µ—Ä–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    measured_pressure = models.JSONField(verbose_name="–ò–∑–º–µ—Ä–µ–Ω–Ω—ã–µ –¥–∞–≤–ª–µ–Ω–∏—è")
    measured_flow = models.JSONField(verbose_name="–ò–∑–º–µ—Ä–µ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã")
    measured_speed = models.JSONField(verbose_name="–ò–∑–º–µ—Ä–µ–Ω–Ω—ã–µ —Å–∫–æ—Ä–æ—Å—Ç–∏")
    
    # –†–∞—Å—á–µ—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    calculated_pressure = models.JSONField(verbose_name="–†–∞—Å—á–µ—Ç–Ω—ã–µ –¥–∞–≤–ª–µ–Ω–∏—è")
    calculated_flow = models.JSONField(verbose_name="–†–∞—Å—á–µ—Ç–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã")
    calculated_speed = models.JSONField(verbose_name="–†–∞—Å—á–µ—Ç–Ω—ã–µ —Å–∫–æ—Ä–æ—Å—Ç–∏")
    
    # –û—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
    overall_deviation = models.FloatField(verbose_name="–û–±—â–µ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ, %")
    status = models.CharField(
        max_length=20,
        choices=[
            ('normal', '–ù–æ—Ä–º–∞'),
            ('warning', '–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ'),
            ('fault', '–ù–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å'),
        ]
    )
    score = models.FloatField(verbose_name="–û—Ü–µ–Ω–∫–∞ (0.0-1.0)")
    
    class Meta:
        db_table = 'mathematical_model_results'
        ordering = ['-time']

class PhasePortraitResult(TimescaleModel):
    """–†–µ–∑—É–ª—å—Ç–∞—Ç —Ñ–∞–∑–æ–≤—ã—Ö –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤"""
    time = TimescaleDateTimeField(interval="1 day")
    system = models.ForeignKey(HydraulicSystem, on_delete=models.CASCADE)
    
    portrait_type = models.CharField(
        max_length=50,
        choices=[
            ('velocity_position', 'V=f(x)'),
            ('force_velocity', 'F=f(V)'),
            ('pressure_flow', 'P=f(Q)'),
        ]
    )
    
    area = models.FloatField(verbose_name="–ü–ª–æ—â–∞–¥—å –ø–æ—Ä—Ç—Ä–µ—Ç–∞")
    reference_area = models.FloatField(verbose_name="–≠—Ç–∞–ª–æ–Ω–Ω–∞—è –ø–ª–æ—â–∞–¥—å")
    area_deviation = models.FloatField(verbose_name="–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø–ª–æ—â–∞–¥–∏, %")
    
    status = models.CharField(
        max_length=20,
        choices=[
            ('normal', '–ù–æ—Ä–º–∞'),
            ('pre_fault', '–ü—Ä–µ–¥–æ—Ç–∫–∞–∑'),
            ('fault', '–û—Ç–∫–∞–∑'),
        ]
    )
    score = models.FloatField(verbose_name="–û—Ü–µ–Ω–∫–∞ (0.0-1.0)")
    
    portrait_data = models.JSONField(verbose_name="–î–∞–Ω–Ω—ã–µ –ø–æ—Ä—Ç—Ä–µ—Ç–∞")
    
    class Meta:
        db_table = 'phase_portrait_results'
        ordering = ['-time']

class IntegratedDiagnosticResult(TimescaleModel):
    """–ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç"""
    time = TimescaleDateTimeField(interval="1 day")
    system = models.ForeignKey(HydraulicSystem, on_delete=models.CASCADE)
    
    # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏
    mathematical_score = models.FloatField(verbose_name="M - –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å")
    phase_portrait_score = models.FloatField(verbose_name="P - —Ñ–∞–∑–æ–≤—ã–µ –ø–æ—Ä—Ç—Ä–µ—Ç—ã")
    tribodiagnostic_score = models.FloatField(verbose_name="T - —Ç—Ä–∏–±–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞")
    
    # –ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
    integrated_score = models.FloatField(verbose_name="D - –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞")
    overall_status = models.CharField(
        max_length=20,
        choices=[
            ('normal', '–ù–æ—Ä–º–∞'),
            ('warning', '–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ'),
            ('fault', '–ù–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å'),
        ]
    )
    
    predicted_remaining_life_hours = models.IntegerField(
        null=True, blank=True,
        verbose_name="–û—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–µ—Å—É—Ä—Å, —á–∞—Å–æ–≤"
    )
    recommendations = models.TextField(verbose_name="–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏")
    
    class Meta:
        db_table = 'integrated_diagnostic_results'
        ordering = ['-time']
    
    def save(self, *args, **kwargs):
        """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç D = 0.4√óM + 0.4√óP + 0.2√óT"""
        if all([self.mathematical_score is not None, 
               self.phase_portrait_score is not None,
               self.tribodiagnostic_score is not None]):
            self.integrated_score = (
                0.4 * self.mathematical_score +
                0.4 * self.phase_portrait_score +
                0.2 * self.tribodiagnostic_score
            )
            
            # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
            if self.integrated_score < 0.3:
                self.overall_status = 'normal'
            elif self.integrated_score < 0.6:
                self.overall_status = 'warning'
            else:
                self.overall_status = 'fault'
        
        super().save(*args, **kwargs)
```

---

## üñ•Ô∏è API & Frontend

### API Endpoints

**–û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
```
POST   /api/diagnostics/mathematical-model/
       Input: {system_id, time_window}
       Output: {status, deviation, score, recommendations}

POST   /api/diagnostics/phase-portraits/
       Input: {system_id, portrait_type, time_window}
       Output: {area, deviation, status, score, portrait_data}

POST   /api/diagnostics/tribodiagnostics/
       Input: {sample_id, analysis_data}
       Output: {iso_class, elements, status, score, recommendations}

POST   /api/diagnostics/integrated/
       Input: {system_id}
       Output: {integrated_score, overall_status, recommendations, predicted_life}

GET    /api/systems/{id}/diagnostic-history/
       Output: –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥
```

### Nuxt 4 Frontend —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ pages/:**
```
pages/
‚îú‚îÄ‚îÄ diagnostics/
‚îÇ   ‚îú‚îÄ‚îÄ index.vue                    # –ì–ª–∞–≤–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ mathematical-model.vue       # –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ phase-portraits.vue          # –§–∞–∑–æ–≤—ã–µ –ø–æ—Ä—Ç—Ä–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ tribodiagnostics.vue         # –¢—Ä–∏–±–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ integrated.vue               # –ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
‚îú‚îÄ‚îÄ systems/[systemId]/
‚îÇ   ‚îî‚îÄ‚îÄ index.vue                    # –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã
‚îî‚îÄ‚îÄ reports/
    ‚îî‚îÄ‚îÄ index.vue                    # –û—Ç—á–µ—Ç—ã
```

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- **DiagnosticChart.vue** - –≥—Ä–∞—Ñ–∏–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **PhasePortraitCanvas.vue** - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–∞–∑–æ–≤—ã—Ö –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤
- **TriboAnalysisTable.vue** - —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞
- **IntegratedScoreGauge.vue** - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏

---

## üöÄ Roadmap

### Sprint 1: –û—Å–Ω–æ–≤–∞ (1 –Ω–µ–¥–µ–ª—è)
- [x] Django 5.2 –º–æ–¥–µ–ª–∏
- [x] TimescaleDB –º–∏–≥—Ä–∞—Ü–∏–∏
- [x] DRF —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã
- [ ] –ë–∞–∑–æ–≤—ã–µ API endpoints

### Sprint 2: –ê–ª–≥–æ—Ä–∏—Ç–º—ã (1 –Ω–µ–¥–µ–ª—è)
- [ ] –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å
- [ ] –ê–ª–≥–æ—Ä–∏—Ç–º —Ñ–∞–∑–æ–≤—ã—Ö –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤
- [ ] –¢—Ä–∏–±–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞

### Sprint 3: Frontend (2 –Ω–µ–¥–µ–ª–∏)
- [ ] Nuxt 4 —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- [ ] Chart.js –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] WebSocket —Ä–∞–±–æ—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

### Sprint 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ–ø–ª–æ–π (1 –Ω–µ–¥–µ–ª—è)
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
- [ ] Integration —Ç–µ—Å—Ç—ã API
- [ ] E2E —Ç–µ—Å—Ç—ã Nuxt 4 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- [ ] CI/CD –ø–∞–π–ø–ª–∞–π–Ω

---

**–í–µ—Ä—Å–∏—è:** v4.0 FINAL ‚úÖ  
**–°—Ç–∞—Ç—É—Å:** –û–±–Ω–æ–≤–ª–µ–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê‚≠ê‚≠ê‚≠ê (—Å—Ä–µ–¥–Ω—è—è-–≤—ã—Å–æ–∫–∞—è)
**–û–±–Ω–æ–≤–ª–µ–Ω–∏—è v4.0:**
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã Mermaid –¥–∏–∞–≥—Ä–∞–º–º—ã
- ‚úÖ –£–¥–∞–ª–µ–Ω —Ä–∞–∑–¥–µ–ª –æ —Ç–æ—á–∫–∞—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ Nuxt 4
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å