# üìö Diagnostic System Guide v4.2 FINAL
## –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ + –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã)

---

## üìù –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
2. [–ú–µ—Ç–æ–¥—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏](#–º–µ—Ç–æ–¥—ã-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
3. [–ü—Ä–æ—Ü–µ—Å—Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏](#–ø—Ä–æ—Ü–µ—Å—Å-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
4. [Django Models](#django-models)
5. [API & Frontend](#api--frontend)
6. [Roadmap](#roadmap)

---

## üè† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —á–µ—Ç—ã—Ä–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

**üé® Frontend (Nuxt 4)**
- Dashboard ‚Äî –≥–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å –æ–±–∑–æ—Ä–æ–º —Å–∏—Å—Ç–µ–º
- Diagnostics UI ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- Real-time Charts ‚Äî –≥—Ä–∞—Ñ–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**‚öôÔ∏è Backend (Django 5.2)**
- REST API ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–µ API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- WebSocket ‚Äî –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- RAG AI ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

**üíæ Database (TimescaleDB)**
- Sensor Data ‚Äî –¥–∞–Ω–Ω—ã–µ —Å –¥–∞—Ç—á–∏–∫–æ–≤
- Analysis Results ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
- System Config ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º

**ü§ñ AI/ML (Ollama + Qwen3)**
- LLM Engine ‚Äî —è–∑—ã–∫–æ–≤–∞—è –º–æ–¥–µ–ª—å
- FAISS Index ‚Äî –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
- RAG Pipeline ‚Äî –∫–æ–Ω–≤–µ–π–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

1. –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö: –î–∞—Ç—á–∏–∫–∏ ‚Üí TimescaleDB
2. –û–±—Ä–∞–±–æ—Ç–∫–∞: TimescaleDB ‚Üí Django AI Engine
3. –ê–Ω–∞–ª–∏–∑: AI Engine ‚Üí 3 –º–µ—Ç–æ–¥–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: Django ‚Üí WebSocket ‚Üí Nuxt 4 Frontend
5. –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏: RAG System ‚Üí Frontend Chat

---

## üîß –ú–µ—Ç–æ–¥—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—Ä–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –º–µ—Ç–æ–¥–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É.

### –ú–µ—Ç–æ–¥ 1Ô∏è‚É£: –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (–≤–µ—Å: 40%)

**–û–ø–∏—Å–∞–Ω–∏–µ**: —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–∫–∞–∑–∞–Ω–∏–π —Å —Ä–∞—Å—á–µ—Ç–Ω—ã–º–∏ –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –º–æ–¥–µ–ª—è–º.

–§–æ—Ä–º—É–ª—ã:
- –ú–æ–º–µ–Ω—Ç –Ω–∞—Å–æ—Å–∞: \( M_\text{–Ω} = \frac{V_0 \cdot P}{2\pi \cdot \eta} \)
- –£–≥–ª–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å: \( \omega = \frac{M_\text{–¥} + M_\text{–º} \cdot n - M_\text{–Ω}}{I_\text{–¥} + I_\text{–Ω} + I_{\text{–º–µ—Ö}}} \)
- –†–∞—Å—Ö–æ–¥: \( Q = \omega \cdot V_0 \cdot \eta \)

–ö—Ä–∏—Ç–µ—Ä–∏–∏:
- \(\Delta < 5\%\) ‚Üí ‚úÖ –ù–æ—Ä–º–∞ (score = 0.1)
- \(5\% \le \Delta < 10\%\) ‚Üí ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (score = 0.5)
- \(\Delta \ge 10\%\) ‚Üí üî¥ –ù–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å (score = 0.9)

### –ú–µ—Ç–æ–¥ 2Ô∏è‚É£: –§–∞–∑–æ–≤—ã–µ –ø–æ—Ä—Ç—Ä–µ—Ç—ã (–≤–µ—Å: 40%)

–û–ø–∏—Å–∞–Ω–∏–µ: –∞–Ω–∞–ª–∏–∑ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–π –≤ —Ñ–∞–∑–æ–≤–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ.

- –ü–ª–æ—â–∞–¥—å –ø–æ –ì–∞—É—Å—Å—É: \[ S = \tfrac{1}{2} \cdot \left| \sum_{i=1}^{n-1} x_i y_{i+1} + x_n y_1 - \sum_{i=1}^{n-1} x_{i+1} y_i - x_1 y_n \right| \]
- –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: \( \Delta S = \frac{|S - S_{\text{—ç—Ç–∞–ª}}|}{S_{\text{—ç—Ç–∞–ª}}} \cdot 100\% \)

–ö—Ä–∏—Ç–µ—Ä–∏–∏:
- < 10% ‚Üí –ù–æ—Ä–º–∞ (0.1)
- 10‚Äì25% ‚Üí –ü—Ä–µ–¥–æ—Ç–∫–∞–∑ (0.5)
- > 25% ‚Üí –û—Ç–∫–∞–∑ (0.9)

### –ú–µ—Ç–æ–¥ 3Ô∏è‚É£: –¢—Ä–∏–±–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–≤–µ—Å: 20%)

–û–ø–∏—Å–∞–Ω–∏–µ: –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–∞–±–æ—á–µ–π –∂–∏–¥–∫–æ—Å—Ç–∏.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: ISO 4406 (‚â•4/‚â•6/‚â•14 Œºm), Fe/Cu/Al/Cr/Si, –≤—è–∑–∫–æ—Å—Ç—å 40¬∞C, pH, –≤–æ–¥–∞ ppm, TAN.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ (–ø—Ä–∏–º–µ—Ä): ISO 15/13/10 ‚Äî –Ω–æ—Ä–º–∞; 16/14/11 ‚Äî –≤–Ω–∏–º–∞–Ω–∏–µ; ‚â•17/15/12 ‚Äî –∫—Ä–∏—Ç–∏–∫–∞.

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª

**–®–∞–≥ 1:** —Å—Ç–∞—Ä—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ (—Ä—É—á–Ω–æ–π/–∞–≤—Ç–æ), –æ–∫–Ω–æ –¥–∞–Ω–Ω—ã—Ö.  
**–®–∞–≥ 2:** —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö: P, Q, T, œâ + –∏—Å—Ç–æ—Ä–∏—è TimescaleDB.  
**–®–∞–≥ 3:** –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç 3 –º–µ—Ç–æ–¥–æ–≤.  
**–®–∞–≥ 4:** –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ü–µ–Ω–æ–∫ (0‚Äì1).  
**–®–∞–≥ 5:** –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ (–±–ª–æ—á–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞):  
\[ D = 0.4\,M + 0.4\,P + 0.2\,T \]
–≥–¥–µ \(M\), \(P\), \(T\) ‚Äî –æ—Ü–µ–Ω–∫–∏ –º–µ—Ç–æ–¥–æ–≤.  
**–®–∞–≥ 6:** —Å—Ç–∞—Ç—É—Å: D<0.3 ‚Äî –ù–æ—Ä–º–∞; D<0.6 ‚Äî –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ; –∏–Ω–∞—á–µ ‚Äî –ù–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å.  
**–®–∞–≥ 7:** –æ—Ç—á–µ—Ç: —Å—Ç–∞—Ç—É—Å—ã, –º–µ—Ç—Ä–∏–∫–∏, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, –æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–µ—Å—É—Ä—Å.  
**–®–∞–≥ 8:** –∑–∞–ø–∏—Å—å –≤ –ë–î, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

–ê–ª–≥–æ—Ä–∏—Ç–º—ã (–∫—Ä–∞—Ç–∫–æ)
- –ú–∞—Ç–µ–º–æ–¥–µ–ª—å: —Å–±–æ—Ä P/Q/œâ ‚Üí —Ä–∞—Å—á–µ—Ç M/œâ/Q ‚Üí ŒîP/ŒîQ ‚Üí score.  
- –ü–æ—Ä—Ç—Ä–µ—Ç—ã: x,V,F,P,Q ‚Üí –ø–ª–æ—â–∞–¥—å/ŒîS ‚Üí —Ñ–æ—Ä–º–∞ (—Ü–µ–Ω—Ç—Ä/—Ä–∞–∑—Ä—ã–≤—ã/–∏—Å–∫–∞–∂–µ–Ω–∏—è) ‚Üí score.  
- –¢—Ä–∏–±–æ: –ø—Ä–æ–±–∞ 100 –º–ª ‚Üí —á–∞—Å—Ç–∏—Ü—ã/—ç–ª–µ–º–µ–Ω—Ç—ã/—Ñ–∏–∑-—Ö–∏–º ‚Üí ISO –∫–ª–∞—Å—Å/–∏–∑–Ω–æ—Å ‚Üí score.

---

## üíª Django Models

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
- HydraulicSystem (owner, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)
- Equipment (—Ç–∏–ø, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –¥–∞—Ç—ã –¢–û)
- Sensor (—Ç–∏–ø, –¥–∏–∞–ø–∞–∑–æ–Ω, —Ç–æ—á–Ω–æ—Å—Ç—å, –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞)
- SensorData (TimescaleDB, value/raw/quality/flags)

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- MathematicalModelResult (Œî, —Å—Ç–∞—Ç—É—Å, score)
- PhasePortraitResult (S, ŒîS, —Ñ–æ—Ä–º–∞, score)
- TribodiagnosticResult (ISO, —ç–ª–µ–º–µ–Ω—Ç—ã, —Ñ–∏–∑-—Ö–∏–º, score)
- IntegratedDiagnosticResult (M/P/T/D, —Å—Ç–∞—Ç—É—Å, alert, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)

---

## üñ•Ô∏è API & Frontend

–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- POST /api/diagnostics/mathematical-model/
- POST /api/diagnostics/phase-portraits/
- POST /api/diagnostics/tribodiagnostics/
- POST /api/diagnostics/integrated/
- GET  /api/systems/{id}/diagnostic-history/

Nuxt 4 —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
- diagnostics/index|mathematical-model|phase-portraits|tribodiagnostics|integrated
- systems/[systemId]/index
- reports/index

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: DiagnosticChart, PhasePortraitCanvas, TriboAnalysisTable, IntegratedScoreGauge.

---

## üöÄ Roadmap

Sprint 1: –º–æ–¥–µ–ª–∏, –º–∏–≥—Ä–∞—Ü–∏–∏, —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã, –±–∞–∑–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã.  
Sprint 2: –∞–ª–≥–æ—Ä–∏—Ç–º—ã 3 –º–µ—Ç–æ–¥–æ–≤ + –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞.  
Sprint 3: Nuxt 4 UI, Chart.js, WebSocket, mobile.  
Sprint 4: —Ç–µ—Å—Ç—ã (unit/integration/E2E), docker, CI/CD.

---

**–í–µ—Ä—Å–∏—è:** v4.2 FINAL  
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:** –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–æ–ª–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Ä–∞–∑–¥–µ–ª—ã) + –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è LaTeX-—Ä–∞–∑–º–µ—Ç–∫–∞ —Ñ–æ—Ä–º—É–ª –±–µ–∑ Mermaid –∏ —Ä–∞–∑–¥–µ–ª–∞ –æ —Ç–æ—á–∫–∞—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤, –∫–∞–∫ –æ–≥–æ–≤–æ—Ä–µ–Ω–æ —Ä–∞–Ω–µ–µ.