# üìö Diagnostic System Guide v3.0 FINAL

## –° Mermaid –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏, —Ç–æ—á–∫–∞–º–∏ –¥–∞—Ç—á–∏–∫–æ–≤ –∏ —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å—Ö–µ–º–∞–º–∏

---

## üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
2. [–¢–æ—á–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤](#—Ç–æ—á–∫–∏-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è-–¥–∞—Ç—á–∏–∫–æ–≤)
3. [–ö—Ä–∞—Å–∏–≤—ã–µ Mermaid –¥–∏–∞–≥—Ä–∞–º–º—ã](#–∫—Ä–∞—Å–∏–≤—ã–µ-mermaid-–¥–∏–∞–≥—Ä–∞–º–º—ã)
4. [–¢—Ä–∏ –º–µ—Ç–æ–¥–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏](#—Ç—Ä–∏-–º–µ—Ç–æ–¥–∞-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
5. [Django Models](#django-models)
6. [API & Frontend](#api--frontend)
7. [Roadmap](#roadmap)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
graph TB
    subgraph Frontend["üé® Frontend (Nuxt 3)"]
        F1["Dashboard"]
        F2["Diagnostics UI"]
        F3["Real-time Charts"]
    end

    subgraph Backend["‚öôÔ∏è Backend (Django 5.2)"]
        B1["REST API"]
        B2["WebSocket"]
        B3["RAG AI"]
    end

    subgraph Database["üíæ Database (TimescaleDB)"]
        D1["Sensor Data"]
        D2["Analysis Results"]
        D3["System Config"]
    end

    subgraph ML["ü§ñ AI/ML (Ollama + Qwen3)"]
        M1["LLM Engine"]
        M2["FAISS Index"]
        M3["RAG Pipeline"]
    end

    F1 -->|HTTP/WS| B1
    F2 -->|HTTP/WS| B2
    F3 -->|Real-time| B2

    B1 --> D1
    B1 --> D2
    B3 --> M1
    M1 --> M2
    M2 --> M3
    B3 --> M3

    style Frontend fill:#e1f5fe
    style Backend fill:#f3e5f5
    style Database fill:#e8f5e8
    style ML fill:#fff3e0
```

---

## üìç –¢–æ—á–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤

### –°—Ç–µ–Ω–¥ –î—É–±–æ–≤–∏–∫–∞ (—Å —Ä–µ–∫—É–ø–µ—Ä–∞—Ü–∏–µ–π —ç–Ω–µ—Ä–≥–∏–∏)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –ò–°–ü–´–¢–ê–¢–ï–õ–¨–ù–´–ô –°–¢–ï–ù–î                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

    [–≠–õ–ï–ö–¢–†–û–î–í–ò–ì–ê–¢–ï–õ–¨]
            ‚Üì œâ_–Ω (–æ–±/–º–∏–Ω)
         üìä –î–ê–¢–ß–ò–ö 1
            ‚Üì
    [–ú–£–§–¢–ê –ú–ù–û–ì–û–î–ò–°–ö–û–í–ê–Ø]
            ‚Üì
    [–ì–ò–î–†–û–ù–ê–°–û–°] ‚Üê –î–ê–¢–ß–ò–ö P‚ÇÅ (–ú–ø–∞) [–î–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–∏]
         ‚Üì
         ‚îú‚îÄ –î–ê–¢–ß–ò–ö Q‚ÇÅ (–ª/–º–∏–Ω) [–†–∞—Å—Ö–æ–¥]
         ‚îî‚îÄ –î–ê–¢–ß–ò–ö T‚ÇÅ (¬∞C) [–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞]
         ‚Üì
    [–û–ë–†–ê–¢–ù–´–ô –ö–õ–ê–ü–ê–ù]
         ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ      –¢–û–ß–ö–ê 2 (–î–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∫–ª–∞–ø–∞–Ω–∞)  ‚îÇ
    ‚îÇ  üìä –î–ê–¢–ß–ò–ö P‚ÇÇ (–ú–ø–∞)                   ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚Üì                  ‚Üì                  ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ –¢–û–ß–ö–ê 3 ‚îÇ       ‚îÇ –¢–û–ß–ö–ê 4 ‚îÇ       ‚îÇ –¢–û–ß–ö–ê 7 ‚îÇ
    ‚îÇ (P‚ÇÉ)    ‚îÇ       ‚îÇ (P‚ÇÑ)    ‚îÇ       ‚îÇ (–°–ª–∏–≤)  ‚îÇ
    ‚îÇ üìä –ü–û–ö  ‚îÇ       ‚îÇ üìä –ü–û–ö  ‚îÇ       ‚îÇ üìä –ü–û–ö  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì                  ‚Üì                  ‚Üì
    [–ü–†–ï–î–û–•–†.         [–ì–ò–î–†–û–ú–û–¢–û–†]       [–ë–ê–ö]
     –ö–õ–ê–ü–ê–ù]               ‚Üì
                       üìä –î–ê–¢–ß–ò–ö 2
                       œâ_–º (–æ–±/–º–∏–Ω)

    [–§–ò–õ–¨–¢–† –°–õ–ò–í–ê]
         ‚Üì
    [–¢–ï–ü–õ–û–û–ë–ú–ï–ù–ù–ò–ö]
         ‚Üì
    [–ê–ö–ö–£–ú–£–õ–Ø–¢–û–† (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)]
         ‚Üì
    [–ì–ò–î–†–û–ë–ê–ö]
```

### –ú–∞—Ç—Ä–∏—Ü–∞ –¥–∞—Ç—á–∏–∫–æ–≤ (—Ä–µ–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)

| –¢–æ—á–∫–∞ | –î–∞—Ç—á–∏–∫ ID     | –¢–∏–ø         | –ï–¥–∏–Ω–∏—Ü–∞ | –î–∏–∞–ø–∞–∑–æ–Ω     | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                   |
| ----- | ------------- | ----------- | ------- | ------------ | ---------------------------- |
| **1** | P_pump        | –î–∞–≤–ª–µ–Ω–∏–µ    | –ú–ø–∞     | 0-250        | –î–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –≤—ã—Ö–æ–¥–µ –Ω–∞—Å–æ—Å–∞    |
| **1** | Q_pump        | –†–∞—Å—Ö–æ–¥      | –ª/–º–∏–Ω   | 0-50         | –†–∞—Å—Ö–æ–¥ –Ω–∞—Å–æ—Å–∞                |
| **1** | T_pump        | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ | ¬∞C      | -10 –¥–æ +80   | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∂–∏–¥–∫–æ—Å—Ç–∏         |
| **2** | P_after_valve | –î–∞–≤–ª–µ–Ω–∏–µ    | –ú–ø–∞     | 0-250        | –ü–æ—Å–ª–µ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –∫–ª–∞–ø–∞–Ω–∞      |
| **3** | P_relief      | –î–∞–≤–ª–µ–Ω–∏–µ    | –ú–ø–∞     | 0-250        | –ù–∞ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å–Ω–æ–º –∫–ª–∞–ø–∞–Ω–µ |
| **4** | P_motor_inlet | –î–∞–≤–ª–µ–Ω–∏–µ    | –ú–ø–∞     | 0-250        | –ù–∞ –≤—Ö–æ–¥–µ –º–æ—Ç–æ—Ä–∞              |
| **M** | œâ_motor       | –°–∫–æ—Ä–æ—Å—Ç—å    | –æ–±/–º–∏–Ω  | 0-3000       | –£–≥–ª–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –º–æ—Ç–æ—Ä–∞      |
| **M** | F_motor       | –£—Å–∏–ª–∏–µ      | –ù       | 0-10000      | –£—Å–∏–ª–∏–µ –Ω–∞ –≤–∞–ª—É –º–æ—Ç–æ—Ä–∞        |
| **5** | P_return      | –î–∞–≤–ª–µ–Ω–∏–µ    | –ú–ø–∞     | 0-10         | –î–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–ª–∏–≤–µ             |
| **6** | x_position    | –ü–æ–ª–æ–∂–µ–Ω–∏–µ   | –º–º      | 0-100        | –ü–æ–ª–æ–∂–µ–Ω–∏–µ —à—Ç–æ–∫–∞ —Ü–∏–ª–∏–Ω–¥—Ä–∞     |
| **6** | V_piston      | –°–∫–æ—Ä–æ—Å—Ç—å    | –º–º/—Å    | -500 –¥–æ +500 | –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ—Ä—à–Ω—è              |
| **7** | Vibr_accel    | –í–∏–±—Ä–∞—Ü–∏—è    | g       | 0-10         | –£—Å–∫–æ—Ä–µ–Ω–∏–µ (–≤–∏–±—Ä–∞—Ü–∏—è)         |

---

## üé® –ö—Ä–∞—Å–∏–≤—ã–µ Mermaid –¥–∏–∞–≥—Ä–∞–º–º—ã

### 1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Ü–∏–∫–ª (–≥–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å)

```mermaid
graph TD
    A["üî¥ –ù–ê–ß–ê–õ–û –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò"] --> B["üìä –°–ë–û–† –î–ê–ù–ù–´–•<br/>‚Ä¢ –î–∞—Ç—á–∏–∫–∏<br/>‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è<br/>‚Ä¢ –ü—Ä–æ–±—ã"]

    B --> C1["1Ô∏è‚É£ –ú–ê–¢–ï–ú–ê–¢. –ú–û–î–ï–õ–¨<br/>–≤–µ—Å: 40%"]
    B --> C2["2Ô∏è‚É£ –§–ê–ó–û–í–´–ï –ü–û–†–¢–†–ï–¢–´<br/>–≤–µ—Å: 40%"]
    B --> C3["3Ô∏è‚É£ –¢–†–ò–ë–û–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê<br/>–≤–µ—Å: 20%"]

    C1 --> D["üîÑ –ù–û–†–ú–ê–õ–ò–ó–ê–¶–ò–Ø<br/>–û—Ü–µ–Ω–∫–∏ 0.0-1.0"]
    C2 --> D
    C3 --> D

    D --> E["üéØ –ò–ù–¢–ï–ì–†–ê–õ–¨–ù–ê–Ø –û–¶–ï–ù–ö–ê<br/>D = 0.4√óM + 0.4√óP + 0.2√óT"]

    E --> F{D - score?}

    F -->|D < 0.3| G["‚úÖ –ù–û–†–ú–ê"]
    F -->|0.3 ‚â§ D < 0.6| H["‚ö†Ô∏è –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï"]
    F -->|D ‚â• 0.6| I["üî¥ –ù–ï–ò–°–ü–†–ê–í–ù–û–°–¢–¨"]

    G --> J["üìã –§–û–†–ú–ò–†–û–í–ê–ù–ò–ï –û–¢–ß–Å–¢–ê"]
    H --> J
    I --> J

    J --> K["üíæ –°–û–•–†–ê–ù–ï–ù–ò–ï<br/>–≤ –ë–î"]

    K --> L["üü¢ –ö–û–ù–ï–¶"]

    style A fill:#ff6b6b
    style G fill:#51cf66
    style H fill:#ffd43b
    style I fill:#ff6b6b
    style L fill:#4c6ef5
```

### 2. –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å (–∞–ª–≥–æ—Ä–∏—Ç–º)

```mermaid
flowchart TD
    A["START<br/>–ü–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã"] --> B["üìà –ò–ó–ú–ï–†–ï–ù–ù–´–ï –î–ê–ù–ù–´–ï<br/>P‚ÇÅ-P‚ÇÑ, Q‚ÇÅ-Q‚ÇÇ‚Çã‚ÇÑ<br/>œâ_–Ω, œâ_–º, T"]

    B --> C["üßÆ –†–ê–°–ß–Å–¢ –ü–û –ú–û–î–ï–õ–ò<br/>M_–Ω = V √ó P / 2œÄ√óŒ∑<br/>œâ_–æ–∂–∏–¥ = ŒîM / I<br/>Q_–æ–∂–∏–¥ = œâ √ó V √ó Œ∑"]

    C --> D["‚öñÔ∏è –°–†–ê–í–ù–ï–ù–ò–ï<br/>ŒîP = |P_–∏–∑–º - P_—Ä–∞—Å—á| / P_—Ä–∞—Å—á<br/>ŒîQ = |Q_–∏–∑–º - Q_—Ä–∞—Å—á| / Q_—Ä–∞—Å—á"]

    D --> E["üìä Œî_–æ–±—â = MAX(ŒîP, ŒîQ)"]

    E --> F{Œî%?}

    F -->|< 5%| G["‚úÖ –ù–û–†–ú–ê"]
    F -->|5-10%| H["‚ö†Ô∏è –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï"]
    F -->|‚â• 10%| I["üî¥ –ù–ï–ò–°–ü–†–ê–í–ù–û–°–¢–¨"]

    G --> J["score = 0.1"]
    H --> J["score = 0.5"]
    I --> J["score = 0.9"]

    J --> K["END<br/>Return score"]

    style A fill:#e3f2fd
    style B fill:#fff3e0
    style C fill:#f3e5f5
    style G fill:#c8e6c9
    style H fill:#fff9c4
    style I fill:#ffcccc
```

### 3. –§–∞–∑–æ–≤—ã–µ –ø–æ—Ä—Ç—Ä–µ—Ç—ã (–∞–Ω–∞–ª–∏–∑)

```mermaid
flowchart TD
    A["START<br/>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö 20+ —Å–µ–∫"] --> B["üìä –°–æ–±—Ä–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã<br/>x(t), V(t), F(t), P(t)<br/>–ß–∞—Å—Ç–æ—Ç–∞: 100 –ì—Ü"]

    B --> C["üé® –ü–û–°–¢–†–û–ï–ù–ò–ï –§–ü<br/>V=fx, F=fV, P=fQ"]

    C --> D["üìê –†–ê–°–ß–Å–¢ –ü–õ–û–©–ê–î–ò<br/>S = 0.5√ó|Œ£(x·µ¢√óy·µ¢‚Çä‚ÇÅ) - ...|<br/>–ø–æ —Ñ–æ—Ä–º—É–ª–µ –ì–∞—É—Å—Å–∞"]

    D --> E["üìä ŒîS = |S - S_—ç—Ç–∞–ª| / S_—ç—Ç–∞–ª"]

    E --> F{ŒîS%?}

    F -->|< 10%| G["‚úÖ –ù–û–†–ú–ê<br/>score=0.1"]
    F -->|10-25%| H["‚ö†Ô∏è –ü–†–ï–î–û–¢–ö–ê–ó<br/>score=0.5"]
    F -->|‚â• 25%| I["üî¥ –û–¢–ö–ê–ó<br/>score=0.9"]

    G --> J["üîç –ê–ù–ê–õ–ò–ó –§–û–†–ú–´<br/>–°–º–µ—â–µ–Ω–∏–µ —Ü–µ–Ω—Ç—Ä–∞?<br/>–†–∞–∑—Ä—ã–≤—ã –∫–æ–Ω—Ç—É—Ä–∞?<br/>–ò—Å–∫–∞–∂–µ–Ω–∏–µ?"]
    H --> J
    I --> J

    J --> K["END<br/>Return score + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"]

    style A fill:#e3f2fd
    style C fill:#f3e5f5
    style D fill:#ede7f6
```

### 4. –¢—Ä–∏–±–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–∞–Ω–∞–ª–∏–∑ –∂–∏–¥–∫–æ—Å—Ç–∏)

```mermaid
flowchart TD
    A["START<br/>–û—Ç–±–æ—Ä –ø—Ä–æ–±—ã 100 –º–ª"] --> B["üß™ –õ–ê–ë–û–†–ê–¢–û–†–ù–´–ô –ê–ù–ê–õ–ò–ó"]

    B --> C1["üî¨ –°–ß–Å–¢–ß–ò–ö –ß–ê–°–¢–ò–¶<br/>‚â•4 –º–∫–º, ‚â•6 –º–∫–º, ‚â•14 –º–∫–º"]
    B --> C2["‚öóÔ∏è –°–ü–ï–ö–¢–†–û–ú–ï–¢–†<br/>Fe, Cu, Al, Cr, Si"]
    B --> C3["üìè –í–ò–°–ö–û–ó–ò–ú–ï–¢–†<br/>—Å–°—Ç, pH, –≤–æ–¥–∞ ppm"]

    C1 --> D["üìä ISO 4406 –∫–ª–∞—Å—Å<br/>N‚ÇÅ/N‚ÇÇ/N‚ÇÉ"]
    C2 --> E["üîç –ò–°–¢–û–ß–ù–ò–ö –ò–ó–ù–û–°–ê<br/>Fe‚Üë = –Ω–∞—Å–æ—Å<br/>Cu‚Üë = –ø–æ–¥—à–∏–ø–Ω–∏–∫–∏<br/>Al‚Üë = —Ü–∏–ª–∏–Ω–¥—Ä—ã"]
    C3 --> F["‚ö†Ô∏è –°–û–°–¢–û–Ø–ù–ò–ï –ñ–ò–î<br/>pH < 6 = –æ–∫–∏—Å–ª–µ–Ω–∏–µ<br/>–≤–æ–¥–µ > 500ppm = –ø—Ä–æ–±–ª–µ–º–∞"]

    D --> G{ISO –∫–ª–∞—Å—Å?}
    E --> H{–≠–ª–µ–º–µ–Ω—Ç?}
    F --> I{–°–æ—Å—Ç–æ—è–Ω–∏–µ?}

    G -->|15/13/10| G1["‚úÖ –ù–æ—Ä–º–∞<br/>score=0.1"]
    G -->|16/14/11| G2["‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ<br/>score=0.5"]
    G -->|‚â•17/15/12| G3["üî¥ –ö—Ä–∏—Ç–∏–∫–∞<br/>score=0.9"]

    G1 --> J["üéØ –§–ò–ù–ê–õ–¨–ù–ê–Ø –û–¶–ï–ù–ö–ê"]
    G2 --> J
    G3 --> J

    H --> J
    I --> J

    J --> K["END<br/>Return score + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"]

    style A fill:#e3f2fd
    style B fill:#f3e5f5
    style G1 fill:#c8e6c9
    style G2 fill:#fff9c4
    style G3 fill:#ffcccc
```

### 5. –ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ (—Ñ–∏–Ω–∞–ª)

```mermaid
graph LR
    A["üìä Math Score<br/>M = 0.1-0.9"] --> D["üéØ –ò–ù–¢–ï–ì–†–ê–õ–¨–ù–ê–Ø<br/>D = 0.4√óM + 0.4√óP + 0.2√óT"]
    B["üìâ Phase Score<br/>P = 0.1-0.9"] --> D
    C["üß™ Tribo Score<br/>T = 0.1-0.9"] --> D

    D --> E{D?}

    E -->|0.0-0.3| F["‚úÖ –ù–û–†–ú–ê<br/>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥"]
    E -->|0.3-0.6| G["‚ö†Ô∏è –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï<br/>–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ"]
    E -->|0.6-1.0| H["üî¥ –ù–ï–ò–°–ü–†–ê–í–ù–û–°–¢–¨<br/>–ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π —Ä–µ–º–æ–Ω—Ç"]

    F --> I["üìã –û–¢–ß–Å–¢<br/>‚Ä¢ –°—Ç–∞—Ç—É—Å<br/>‚Ä¢ –î–µ—Ç–∞–ª–∏<br/>‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏<br/>‚Ä¢ –†–µ—Å—É—Ä—Å"]
    G --> I
    H --> I

    style A fill:#e1f5fe
    style B fill:#e1f5fe
    style C fill:#e1f5fe
    style D fill:#fff3e0
    style F fill:#c8e6c9
    style G fill:#fff9c4
    style H fill:#ffcccc
    style I fill:#f3e5f5
```

---

## üîß –¢—Ä–∏ –º–µ—Ç–æ–¥–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –ú–µ—Ç–æ–¥ 1Ô∏è‚É£: –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

**–§–æ—Ä–º—É–ª—ã:**

\(
M_–Ω = \frac{V_0 \times P}{2\pi \times \eta}
\)

\(
\omega = \frac{M*–¥ + M*–º \times n - M*–Ω}{I*–¥ + I*–Ω + I*{–º–µ—Ö}}
\)

\(
Q = \omega \times V_0 \times \eta
\)

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**

- Œî < 5% ‚Üí ‚úÖ –ù–æ—Ä–º–∞
- 5% ‚â§ Œî < 10% ‚Üí ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ
- Œî ‚â• 10% ‚Üí üî¥ –ù–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å

---

### –ú–µ—Ç–æ–¥ 2Ô∏è‚É£: –§–∞–∑–æ–≤—ã–µ –ø–æ—Ä—Ç—Ä–µ—Ç—ã

**–§–æ—Ä–º—É–ª–∞ –ì–∞—É—Å—Å–∞ (–ø–ª–æ—â–∞–¥—å):**

\(
S = 0.5 \times \left| \sum*{i=1}^{n-1} x_i y*{i+1} + x*n y_1 - \sum*{i=1}^{n-1} x\_{i+1} y_i - x_1 y_n \right|
\)

**–ê–Ω–∞–ª–∏–∑:**
| ŒîS | –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏–µ |
|----|--------|----------|
| < 10% | ‚úÖ –ù–æ—Ä–º–∞ | –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å |
| 10-25% | ‚ö†Ô∏è –ü—Ä–µ–¥–æ—Ç–∫–∞–∑ | –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ |
| > 25% | üî¥ –û—Ç–∫–∞–∑ | –†–µ–º–æ–Ω—Ç |

---

### –ú–µ—Ç–æ–¥ 3Ô∏è‚É£: –¢—Ä–∏–±–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- ISO 4406 –∫–ª–∞—Å—Å —á–∏—Å—Ç–æ—Ç—ã
- –≠–ª–µ–º–µ–Ω—Ç–Ω—ã–π —Å–æ—Å—Ç–∞–≤ (Fe, Cu, Al, Cr)
- –§–∏–∑–∏–∫–æ-—Ö–∏–º–∏—á–µ—Å–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ (pH, –≤—è–∑–∫–æ—Å—Ç—å, –≤–æ–¥–∞)

**–ù–æ—Ä–º–∞ ISO 15/13/10**

---

## üíª Django Models

### Core Models

```python
# backend/apps/diagnostics/models/core.py

class HydraulicSystem(models.Model):
    """–ì–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞"""
    name = models.CharField(max_length=200)
    system_type = models.CharField(max_length=20)
    max_pressure = models.FloatField()  # –ú–ü–∞
    nominal_flow = models.FloatField()  # –ª/–º–∏–Ω
    created_at = models.DateTimeField(auto_now_add=True)
    is_active = models.BooleanField(default=True)

    class Meta:
        db_table = 'hydraulic_systems'

class Equipment(models.Model):
    """–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ"""
    system = models.ForeignKey(HydraulicSystem, on_delete=models.CASCADE)
    name = models.CharField(max_length=200)
    equipment_type = models.CharField(max_length=20)  # pump, motor, valve...
    technical_parameters = models.JSONField(default=dict)
    installation_date = models.DateTimeField()

    class Meta:
        db_table = 'equipments'

class Sensor(models.Model):
    """–î–∞—Ç—á–∏–∫"""
    equipment = models.ForeignKey(Equipment, on_delete=models.CASCADE)
    name = models.CharField(max_length=200)
    sensor_type = models.CharField(max_length=20)  # pressure, flow, temp...
    unit = models.CharField(max_length=20)  # MPa, l/min, ¬∞C...
    min_value = models.FloatField()
    max_value = models.FloatField()
    is_active = models.BooleanField(default=True)

    class Meta:
        db_table = 'sensors'
```

### Diagnostic Results

```python
class MathematicalModelResult(models.Model):
    """–†–µ–∑—É–ª—å—Ç–∞—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–æ–¥–µ–ª–∏"""
    system = models.ForeignKey(HydraulicSystem, on_delete=models.CASCADE)
    timestamp = models.DateTimeField()

    status = models.CharField(max_length=20)  # normal, warning, fault
    deviation = models.FloatField()  # Œî%
    score = models.FloatField()  # 0.0-1.0

    class Meta:
        db_table = 'math_model_results'
        ordering = ['-timestamp']

class PhasePortraitResult(models.Model):
    """–†–µ–∑—É–ª—å—Ç–∞—Ç —Ñ–∞–∑–æ–≤—ã—Ö –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤"""
    system = models.ForeignKey(HydraulicSystem, on_delete=models.CASCADE)
    timestamp = models.DateTimeField()

    area = models.FloatField()
    area_deviation = models.FloatField()  # ŒîS%
    status = models.CharField(max_length=20)
    score = models.FloatField()  # 0.0-1.0

    class Meta:
        db_table = 'phase_portrait_results'

class IntegratedDiagnosticResult(models.Model):
    """–ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç"""
    system = models.ForeignKey(HydraulicSystem, on_delete=models.CASCADE)
    timestamp = models.DateTimeField()

    math_score = models.FloatField()
    phase_score = models.FloatField()
    tribo_score = models.FloatField()

    integrated_score = models.FloatField()  # D
    overall_status = models.CharField(max_length=20)

    recommendations = models.TextField()
    predicted_remaining_life = models.IntegerField()  # —á–∞—Å–æ–≤

    class Meta:
        db_table = 'integrated_results'
        ordering = ['-timestamp']
```

---

## üé® API & Frontend

### API Endpoints

```
POST   /api/diagnostics/mathematical-model/
       Input: {system_id}
       Output: {status, deviation, score, recommendations}

POST   /api/diagnostics/phase-portraits/
       Input: {system_id}
       Output: {area, deviation, status, score}

POST   /api/diagnostics/tribodiagnostics/
       Input: {sample_id}
       Output: {iso_class, elements, status, score}

POST   /api/diagnostics/integrated/
       Input: {system_id}
       Output: {integrated_score, overall_status, recommendations}
```

### Frontend Pages

```
pages/
‚îú‚îÄ‚îÄ diagnostics/
‚îÇ   ‚îú‚îÄ‚îÄ index.vue                    # –ì–ª–∞–≤–Ω–∞—è
‚îÇ   ‚îú‚îÄ‚îÄ mathematical-model.vue       # –ú–∞—Ç –º–æ–¥–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ phase-portraits.vue          # –§–ü
‚îÇ   ‚îú‚îÄ‚îÄ tribodiagnostics.vue         # –¢—Ä–∏–±–æ
‚îÇ   ‚îî‚îÄ‚îÄ integrated.vue               # –ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
‚îú‚îÄ‚îÄ systems/[systemId]/
‚îÇ   ‚îî‚îÄ‚îÄ index.vue                    # –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã
‚îî‚îÄ‚îÄ reports.vue                      # –û—Ç—á—ë—Ç—ã
```

---

## üöÄ Roadmap

### Sprint 1: Models (1 –Ω–µ–¥–µ–ª—è)

- [ ] Django models
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏
- [ ] DRF serializers

### Sprint 2: API (1 –Ω–µ–¥–µ–ª—è)

- [ ] Endpoints –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤
- [ ] Calculations functions
- [ ] WebSocket –¥–ª—è real-time

### Sprint 3: Frontend (2 –Ω–µ–¥–µ–ª–∏)

- [ ] Pages —Å–æ–∑–¥–∞–Ω–∏–µ
- [ ] VEchart –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] Forms

### Sprint 4: Testing (1 –Ω–µ–¥–µ–ª—è)

- [ ] Unit tests
- [ ] Integration tests
- [ ] E2E —Ç–µ—Å—Ç—ã

---

**–í–µ—Ä—Å–∏—è:** v3.0 FINAL ‚úÖ  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê‚≠ê‚≠ê‚≠ê (—Å—Ä–µ–¥–Ω—è—è-–≤—ã—Å–æ–∫–∞—è)

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**

- –î—É–±–æ–≤–∏–∫ –ï.–ê. "–°—Ç–µ–Ω–¥ –¥–ª—è –∏—Å–ø—ã—Ç–∞–Ω–∏—è –æ–±—ä–µ–º–Ω—ã—Ö –≥–∏–¥—Ä–æ–º–∞—à–∏–Ω —Å —Ä–µ–∫—É–ø–µ—Ä–∞—Ü–∏–µ–π —ç–Ω–µ—Ä–≥–∏–∏"
- –ì–∞—Ä–µ–µ–≤ –ê.–ú. "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–∑–æ–≤—ã—Ö –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º"
- –ì–∞–ª–¥–∏–Ω –ù.–°., –°–µ–º–µ–Ω–æ–≤–∞ –ò.–ê. "–ì–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∏–µ —Å—Ö–µ–º—ã –º–æ–±–∏–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω"
- –ì–û–°–¢ 2.704-76 "–ü—Ä–∞–≤–∏–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≥–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∏—Ö —Å—Ö–µ–º"
