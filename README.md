# üîß Hydraulic Diagnostic SaaS

**–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è SaaS-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≥–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º**

[![CI Status](https://github.com/Shukik85/hydraulic-diagnostic-saas/actions/workflows/ci.yml/badge.svg)](https://github.com/Shukik85/hydraulic-diagnostic-saas/actions/workflows/ci.yml)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python](https://img.shields.io/badge/Python-3.10%2B-blue.svg)](https://www.python.org/)
[![Django](https://img.shields.io/badge/Django-5.2-green.svg)](https://djangoproject.com/)
[![TimescaleDB](https://img.shields.io/badge/TimescaleDB-2.17-orange.svg)](https://www.timescale.com/)

> –ü–µ—Ä–µ–¥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≥–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º —Å AI-–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π, RAG-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º –Ω–∞ –±–∞–∑–µ Qwen3 + LangChain –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –Ω–∞ TimescaleDB.

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

üìà **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** - —Å–±–æ—Ä –∏ –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤  
ü§ñ **AI-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—è–≤–ª–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π  
üí¨ **RAG Assistant** - –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –Ω–∞ –±–∞–∑–µ LLM  
üìÄ **TimescaleDB** - –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤  
‚ö° **Celery** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö  
üì± **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI** - Nuxt 3 + Vue 3 + Chart.js

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è |
|----------|-------------|--------|
| **Backend** | Django + DRF | 5.2+ |
| **Database** | TimescaleDB + PostgreSQL | 2.17 + 16+ |
| **Cache** | Redis | 7.0+ |
| **Task Queue** | Celery + Redis | 5.4+ |
| **AI/LLM** | Ollama + Qwen3 | –õ–æ–∫–∞–ª—å–Ω–æ |
| **RAG** | LangChain + FAISS | 0.3+ |
| **WebSockets** | Django Channels | 4.1+ |
| **Frontend** | Nuxt 3 + Vue 3 | 3.0+ |
| **–°—Ç–∏–ª–∏** | Tailwind CSS | 3.4+ |
| **CI/CD** | GitHub Actions | - |

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
git clone https://github.com/Shukik85/hydraulic-diagnostic-saas.git
cd hydraulic-diagnostic-saas
cp .env.example .env  # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã
```

### 2. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose
```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make dev

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ
docker-compose -f docker-compose.dev.yml up -d
```

### 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```bash
# –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
make migrate

# –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∞
make superuser

# –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ + RAG —Å–∏—Å—Ç–µ–º–∞
make init-data
```

### 4. –î–æ—Å—Ç—É–ø–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
- **Frontend**: http://localhost:3000
- **Backend API**: http://localhost:8000/api/
- **Admin Panel**: http://localhost:8000/admin/
- **API Docs**: http://localhost:8000/api/docs/

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ **–º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ** —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:

```
hydraulic-diagnostic-saas/
‚îú‚îÄ‚îÄ backend/           # Django –±—ç–∫—ç–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ diagnostics/    # –°–∏—Å—Ç–µ–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rag_assistant/  # RAG-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users/          # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ core/           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Django
‚îú‚îÄ‚îÄ nuxt_frontend/    # Nuxt 3 —Ñ—Ä–æ–Ω—Ç—ç–Ω–¥
‚îú‚îÄ‚îÄ docker/           # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ data/             # –õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (FAISS –∏–Ω–¥–µ–∫—Å—ã)
```

### üîç –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **`apps.diagnostics`** - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥–∏–¥—Ä–æ—Å–∏—Å—Ç–µ–º, AI-–∞–Ω–∞–ª–∏–∑ –∞–Ω–æ–º–∞–ª–∏–π
- **`apps.rag_assistant`** - –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –Ω–∞ –±–∞–∑–µ Qwen3
- **TimescaleDB** - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤
- **FAISS** - –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞

---

## üîß Makefile –∫–æ–º–∞–Ω–¥—ã

```bash
# üöÄ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
make dev              # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ dev
make logs             # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
make shell            # Django shell
make migrate          # –ú–∏–≥—Ä–∞—Ü–∏–∏
make superuser        # –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∞
make init-data        # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ + RAG

# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make test             # –í—Å–µ —Ç–µ—Å—Ç—ã
make test-backend     # –¢–æ–ª—å–∫–æ backend
make test-rag         # –¢–µ—Å—Ç RAG —Å–∏—Å—Ç–µ–º—ã
make smoke-test       # Smoke —Ç–µ—Å—Ç—ã

# üé® –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
make lint             # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º
make format           # –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make check            # Pre-commit –ø—Ä–æ–≤–µ—Ä–∫–∞

# üö¢ Production
make prod             # –ó–∞–ø—É—Å—Ç–∏—Ç—å production
make prod-logs        # Production –ª–æ–≥–∏
make backup-db        # –ë–µ–∫–∞–ø –ë–î
```

---

## üêç –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

### 1. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –≥–∏–¥—Ä–æ—Å–∏—Å—Ç–µ–º—É
```python
import requests

response = requests.post('http://localhost:8000/api/systems/', {
    'name': '–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–π –ø—Ä–µ—Å—Å #1',
    'system_type': 'industrial',
    'max_pressure': 250.0,
    'location': '–¶–µ—Ö 1'
})
print(response.json())
```

### 2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∞
```python
sensor_data = {
    'system_id': 1,
    'sensor_type': 'pressure',
    'value': 185.5,
    'unit': 'bar',
    'timestamp': '2025-10-21T00:00:00Z'
}
response = requests.post('http://localhost:8000/api/sensor-data/', sensor_data)
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RAG-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
```python
query = {
    'question': '–ö–∞–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –¥–∞–≤–ª–µ–Ω–∏–µ–º?',
    'system_id': 1
}
response = requests.post('http://localhost:8000/api/rag/query/', query)
print(response.json()['answer'])
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **pytest** –¥–ª—è backend –∏ **Vitest** –¥–ª—è frontend.

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
make test

# –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=apps --cov-report=html

# –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
python smoke_diagnostics.py  # Smoke —Ç–µ—Å—Ç—ã
python test_rag.py           # –¢–µ—Å—Ç RAG
```

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [TESTING.md](TESTING.md)

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–∞—á–µ—Å—Ç–≤–æ

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç **–ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º** —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

‚úÖ **SQL Injection –∑–∞—â–∏—Ç–∞** - –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã  
‚úÖ **Pre-commit —Ö—É–∫–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞  
‚úÖ **GitHub Actions CI** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã  
‚úÖ **Type Hints** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ mypy  
‚úÖ **Code Coverage** - –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ > 80%

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
bandit -r backend/ -c .bandit

# –õ–∏–Ω—Ç–∏–Ω–≥
flake8 backend/
isort --check backend/
black --check backend/

# Pre-commit –ø—Ä–æ–≤–µ—Ä–∫–∞
pre-commit run --all-files
```

---

## üìä –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ TimescaleDB

–ü—Ä–æ–µ–∫—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å **–±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**:

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≥–∏–ø–µ—Ä—Ç–∞–±–ª–∏—Ü—ã** –¥–ª—è `SensorData`
- **Chunk management** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –ø–æ 7 –¥–Ω–µ–π
- **Compression** - —Å–∂–∞—Ç–∏–µ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Retention policies** - –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [backend/BACKEND_ARCHITECTURE_REVIEW.md](backend/BACKEND_ARCHITECTURE_REVIEW.md)

---

## ü§ñ AI –∏ RAG –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å **–ª–æ–∫–∞–ª—å–Ω—ã–º–∏ LLM**:

- **Qwen3:8b** (—á–µ—Ä–µ–∑ Ollama) –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
- **nomic-embed-text** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è embeddings
- **FAISS** –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **LangChain** –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ RAG-pipeline

### RAG –ü—Ä–∏–º–µ—Ä:
```python
# –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
from apps.rag_assistant.models import RagSystem, Document

rag_system = RagSystem.objects.create(name="–ì–∏–¥—Ä–æ—Å–∏—Å—Ç–µ–º—ã")
Document.objects.create(
    rag_system=rag_system,
    title="–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏",
    content="–ü—Ä–∏ —Å–Ω–∏–∂–µ–Ω–∏–∏ –¥–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å–æ—Å..."
)

# –ó–∞–ø—Ä–æ—Å –∫ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É
response = requests.post('http://localhost:8000/api/rag/query/', {
    'question': '–ü–æ—á–µ–º—É —É–ø–∞–ª–æ –¥–∞–≤–ª–µ–Ω–∏–µ?'
})
```

---

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [TESTING.md](TESTING.md) - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- [backend/BACKEND_ARCHITECTURE_REVIEW.md](backend/BACKEND_ARCHITECTURE_REVIEW.md) - –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- [backend/IMPLEMENTATION_GUIDE.md](backend/IMPLEMENTATION_GUIDE.md) - –ì–∞–π–¥ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- [RUN_PRECOMMIT_TESTS.md](RUN_PRECOMMIT_TESTS.md) - Pre-commit —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## ü§ù Contributing

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch: `git checkout -b feature/new-feature`
3. –ö–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è: `git commit -m 'Add new feature'`
4. Push –≤ branch: `git push origin feature/new-feature`
5. –û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ Pull Request

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ > 80%
- –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ pre-commit —Ö—É–∫–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

**–ü–ª–æ—Ç–Ω–∏–∫–æ–≤ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä**  
üìß shukik85@ya.ru  
üêô [@Shukik85](https://github.com/Shukik85)

---

**‚≠ê Star –Ω–∞ GitHub, –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –ø–æ–ª–µ–∑–µ–Ω!**